<!doctype html>
<html>
  <head>
    <title>Rock Paper Scissors</title>
    <meta charset="utf-8" />
  </head>
  <body>

    
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>

    <div id="container">
    </div>
    
    <script>

     const CHOICES = ["rock", "paper", "scissors"];

     const RULES = {"rock": "scissors", "paper": "rock", "scissors": "paper"};

     let playerScore = 0;
     let cpuScore = 0;

     function getCpuChoice() {

         return CHOICES[Math.floor(Math.random() * CHOICES.length)];
     }

     function winOrLoseOrTie(p1, c1) {

         if (p1 == c1) {
             return undefined; // Tie
         }

         return c1 == RULES[p1] ? true : false;
     }

     function playRound(playerSelection) {
         const cpuSelection = getCpuChoice();

         console.log(cpuSelection);

         let result = winOrLoseOrTie(playerSelection, cpuSelection);
         
         if (result === true) {
             playerScore += 1;
             div.textContent = `You Win! ${playerSelection} beats ${cpuSelection}`;
         } else if (result === false) {
             cpuScore += 1;
             div.textContent = `You Lose! ${cpuSelection} beats ${playerSelection}`;
         } else {
             div.textContent = "Tie!";
         }

         score.textContent = `Player: ${playerScore} CPU: ${cpuScore}`;
         
         if (playerScore == 5) {
             div.textContent = "YOU WIN";
             playerScore = 0;
             cpuScore = 0;
         } else if (cpuScore == 5) {
             div.textContent = "YOU LOSE";
             playerScore = 0;
             cpuScore = 0;
         }
         
         return result;
     }

     

     document.getElementById("rock").addEventListener(
         "click", () => { playRound("rock"); });
     document.getElementById("paper").addEventListener(
         "click", () => { playRound("paper"); });
     document.getElementById("scissors").addEventListener(
         "click", () => { playRound("scissors"); });


     const container = document.querySelector('#container');
     const div = document.createElement('div');
     div.style.cssText = "margin-top: 40px; background-color: pink; color: red;"
     div.classList.add('div');
     div.textContent = "Start!";

     container.appendChild(div);

     const score = document.createElement('div');
     score.style.cssText = "margin-top: 40px; background-color: black; color: white;"
     score.classList.add('score');
     score.textContent = `Player: ${playerScore} CPU: ${cpuScore}`;

     container.appendChild(score);
     
     
    </script>
  </body>
</html>
